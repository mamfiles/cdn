document.addEventListener("DOMContentLoaded",(function(){const t=document.querySelectorAll(".view-btn"),e=document.querySelector(".overlay"),n=document.querySelectorAll(".popup"),o=document.querySelectorAll(".close-btn");let i,a,s,c,d=!1,l=!1;function u(t){d&&1===t.touches.length&&(a=t.touches[0].clientY,s=parseInt(i.style.top)||i.getBoundingClientRect().top)}function r(t){if(!d||1!==t.touches.length)return;const e=t.touches[0].clientY-a,n=Math.max(s+e,s);i.style.top=n+"px"}function m(t){if(!d)return;const e=t.changedTouches[0].clientY-a,n=i.offsetHeight;e>.5*n?(p(),h()):(i.style.top=s+"px",e<0&&Math.abs(e)>.5*n*.5?(i.style.transition="",i.style.top=s+"px"):(i.style.transition="top 0.3s ease",setTimeout((function(){i.style.transition=""}),300)))}function f(t){window.innerWidth<768?(t.style.top="auto",t.style.bottom="0",t.style.transform="translate(-50%, 0)",t.classList.add("slide-in-animation"),e.classList.add("fade-in-animation")):(e.style.display="block",e.classList.add("fade-in-animation"),n.forEach((t=>{t.style.top="50%",t.style.bottom="auto",t.style.transform="translate(-50%, -50%)",t.classList.add("fade-in-animation")}))),e.style.display="block",t.style.display="block",e.classList.add("show"),t.classList.add("show"),d=!0,document.body.style.overflow="hidden",i=t}function p(){window.innerWidth<768?(i.style.top=i.getBoundingClientRect().top+"px",i.classList.add("slide-out-animation"),e.classList.add("fade-out-animation"),setTimeout((function(){e.style.display="none",i.style.display="none",i.classList.remove("slide-out-animation"),e.classList.remove("fade-out-animation")}),300)):(e.classList.add("fade-out-animation"),n.forEach((t=>{t.classList.add("fade-out-animation")})),setTimeout((function(){e.style.display="none",n.forEach((t=>{t.style.display="none"})),e.classList.remove("fade-out-animation"),n.forEach((t=>{t.classList.remove("fade-out-animation")}))}),300)),d=!1,document.body.style.overflow=""}function y(){window.innerWidth<768?n.forEach((t=>{t.style.top="auto",t.style.bottom="0",t.style.transform="translate(-50%, 0)"})):n.forEach((t=>{t.style.top="50%",t.style.bottom="auto",t.style.transform="translate(-50%, -50%)"}))}function h(){const t=window.location.pathname;history.replaceState({},document.title,t)}function L(t){navigator.clipboard.writeText(t).then((function(){console.log("Link copied to clipboard!")})).catch((function(t){console.error("Could not copy link: ",t)}))}!function(){const t=new URLSearchParams(window.location.search).get("view");if(t){const e=document.getElementById(t);e&&f(e)}}(),t.forEach((t=>{function e(e){if(e.preventDefault(),!l){const e=t.getAttribute("data-popup");L(`${window.location.origin}${window.location.pathname}?view=${e}`),alert("Link copied to clipboard: "+e),l=!0,setTimeout((()=>{l=!1}),1e3)}}t.addEventListener("click",(function(){const t=this.getAttribute("data-popup"),e=document.getElementById(t);e&&f(e)})),t.addEventListener("keydown",(function(t){if("Enter"===t.code||"Space"===t.code){const t=this.getAttribute("data-popup"),e=document.getElementById(t);e&&f(e)}})),t.addEventListener("contextmenu",(function(t){t.preventDefault();const e=this.getAttribute("data-popup");L(`${window.location.origin}${window.location.pathname}?view=${e}`),alert("Link copied to clipboard: "+e)})),t.addEventListener("touchstart",(function(t){c=setTimeout((()=>e(t)),600)})),t.addEventListener("touchend",(function(){clearTimeout(c)})),t.addEventListener("mousedown",(function(t){c=setTimeout((()=>e(t)),600)})),t.addEventListener("mouseup",(function(){clearTimeout(c)})),t.addEventListener("mouseleave",(function(){clearTimeout(c)}))})),o.forEach((t=>{t.addEventListener("click",(function(){p(),h()}))})),e.addEventListener("click",(function(t){t.stopPropagation()})),window.addEventListener("resize",(function(){y()})),window.addEventListener("click",(function(t){d&&t.target===e&&p()})),document.addEventListener("touchstart",u),e.addEventListener("touchstart",u),document.addEventListener("touchmove",r),e.addEventListener("touchmove",r),document.addEventListener("touchend",m),e.addEventListener("touchend",m),y()}));
