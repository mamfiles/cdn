document.addEventListener("DOMContentLoaded",(()=>{const e=document.querySelectorAll(".view-btn"),t=document.querySelector(".overlay"),n=document.querySelectorAll(".popup"),o=document.querySelectorAll(".close-btn");let i,a,d,s,c=!1;const r=e=>{const t=e.getAttribute("data-popup"),n=`${window.location.origin}${window.location.pathname}?view=${t}`;var o;o=n,navigator.clipboard.writeText(o).catch((e=>console.error("Copy failed: ",e))),console.log(`Link copied to clipboard: ${t}`)},l=e=>{t.style.display="block",t.classList.add("fade-in-animation"),e.style.display="block",e.classList.add(window.innerWidth<768?"slide-in-animation":"fade-in-animation"),e.style.transform=window.innerWidth<768?"translate(-50%, 0)":"translate(-50%, -50%)",c=!0,document.body.style.overflow="hidden",i=e},u=()=>{t.classList.add("fade-out-animation"),i.classList.add(window.innerWidth<768?"slide-out-animation":"fade-out-animation"),setTimeout((()=>{t.style.display="none",i.style.display="none",t.classList.remove("fade-out-animation"),i.classList.remove("slide-out-animation","fade-out-animation")}),300),c=!1,document.body.style.overflow=""},m=()=>{history.replaceState({},document.title,window.location.pathname)};e.forEach((e=>{e.addEventListener("click",(()=>l(document.getElementById(e.getAttribute("data-popup"))))),e.addEventListener("keydown",(t=>{["Enter","Space"].includes(t.code)&&l(document.getElementById(e.getAttribute("data-popup")))})),e.addEventListener("contextmenu",(t=>{t.preventDefault(),r(e)})),e.addEventListener("touchstart",(()=>s=setTimeout((()=>r(e)),500))),e.addEventListener("touchend",(()=>clearTimeout(s))),e.addEventListener("mousedown",(()=>s=setTimeout((()=>r(e)),500))),e.addEventListener("mouseup",(()=>clearTimeout(s))),e.addEventListener("mouseleave",(()=>clearTimeout(s)))})),o.forEach((e=>e.addEventListener("click",(()=>{u(),m()})))),t.addEventListener("click",(e=>e.target===t&&u())),window.addEventListener("resize",(()=>n.forEach((e=>e.style.transform=window.innerWidth<768?"translate(-50%, 0)":"translate(-50%, -50%)"))));const h=e=>{c&&1===e.touches.length&&(a=e.touches[0].clientY,d=parseInt(i.style.top)||i.getBoundingClientRect().top)},p=e=>{if(c&&1===e.touches.length){const t=e.touches[0].clientY-a;i.style.top=`${Math.max(d+t,d)}px`}},v=e=>{if(!c)return;e.changedTouches[0].clientY-a>.5*i.offsetHeight?(u(),m()):(i.style.transition="top 0.3s ease",setTimeout((()=>i.style.transition=""),300))};document.addEventListener("touchstart",h),document.addEventListener("touchmove",p),document.addEventListener("touchend",v),t.addEventListener("touchstart",h),t.addEventListener("touchmove",p),t.addEventListener("touchend",v),(()=>{const e=new URLSearchParams(window.location.search).get("view");if(e){const t=document.getElementById(e);t&&l(t)}})()}));
